<script type="text/ng-template" id="newUser.html">
  <div class="modal-header">
    <h3 class="modal-title">Create a new user!</h3>
  </div> 
  <div class="modal-body">
  <input type="text" class="form-control form-inline" placeholder="What's your name?" ng-model="newStudentName">
  </div>
  <div class="modal-footer">
    <button class="btn btn-primary" ng-click="ok()">OK</button>
    <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
  </div>
</script>
<div class="container case-log-container">
<div class="row">
  <div class="col-lg-4">
  <div class="row">
    <div class="col-lg-12">
      <div class="form-group form-inline">
        <input type="text" class="form-control form-inline" placeholder="Enter your NetId" ng-model="netId" ng-disabled="user">
        <input type="submit" class="btn-success form-control" value="Login" ng-click="login()" ng-hide="user" >
        <input type="submit" class="btn-danger form-control" value="Logout" ng-click="logout()" ng-show="user" >
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-7">
      <h4>Date case was seen</h4>
      <p class="input-group">
        <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="dt" is-open="opened" min-date="minDate" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" ng-disabled="!user"   />
        <span class="input-group-btn">
          <button type="button" class="btn btn-default" ng-click="open($event)" ng-disabled="!user"><i class="glyphicon glyphicon-calendar"></i></button>
        </span>
      </p>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <h4>Patient Info</h4>
      <form class="form-group form-inline">
        <div class="form-group">
            <label for="patientID" class="sr-only">Patient ID</label>
            <input type="text" class="form-control" placeholder="Patient ID" ng-model="case.patientId" ng-disabled="!user">
          </div>
        <select class="form-control" ng-model="case.patientSpecies" ng-disabled="!user"> 
          <option value="" >Pick a species</option>
          <option value="Canine">Canine</option>
          <option value="Feline">Feline</option>
          <option value="Equine">Equine </option>
          <option value="Other">Other</option>
        </select>
        <br>
        <div class="form-group">
          <label for="Patient Name" class="sr-only">Patient name</label>
          <input type="text" class="form-control" placeholder="Patient name" ng-model="case.patientName" value="Fluffy" ng-disabled="!user">
        </div>
        <div class="form-group">
          <label for="Patient Surname" class="sr-only">Patient last name</label>
          <input type="text" class="form-control" placeholder="Patient last name" ng-model="case.patientSurname" value="Smith" ng-disabled="!user">
        </div>
      </form>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <h4>Case info</h4>
      <form class="form-group">
        <label class="radio-inline">
          <input type="radio" name="case-type" ng-model="case.caseType" value="new" ng-disabled="!user">New case
        </label>
        <label class="radio-inline">
          <input type="radio" name="case-type" ng-model="case.caseType" value="recheck" ng-disabled="!user">Recheck
        </label>
        <label class="radio-inline">
          <input type="radio" name="case-type" ng-model="case.caseType" value="procedure" ng-disabled="!user">Procedure/Surgery
        </label>
      </form>
      <form class="form-group animate-show" ng-show="case.caseType == 'procedure'">
        <h5>What was your level of involvement?</h5>
        <label class="radio">
          <input type="radio" name="case-involvement" ng-model="studentInvolvement" value="all" ng-disabled="!user">Did all of it!
        </label>
        <label class="radio">
          <input type="radio" name="case-involvement" ng-model="studentInvolvement" value="some" ng-disabled="!user">Did some of the procedure!
        </label>
        <label class="radio">
          <input type="radio" name="case-involvement" ng-model="studentInvolvement" value="none" ng-disabled="!user">Helped with paperwork!!
        </label>
      </form>

      <h5>Diagnoses</h5>
      <div class="form-group">
        <div ng-repeat="diagnosis in case.diagnoses track by $index">
          <form class="form-inline">
            <div class="form-group">
              <label for="diagnosisExample" class="sr-only">Diagnosis here</label>
                <input type="text" typeahead="diagnosis for diagnosis in diagnoses | filter:$viewValue | limitTo:8" class="form-control" ng-model="case.diagnoses[$index].diagnosis" placeholder="Diagnosis" ng-disabled="!user">
                <label class="radio-inline">
  <input type="radio" name="inlineRadioOptions" id="inlineRadio1" ng-model="case.diagnoses[$index].location" value="OD">OD 
</label>
<label class="radio-inline">
  <input type="radio" name="inlineRadioOptions" id="inlineRadio2" ng-model="case.diagnoses[$index].location" value="OS">OS 
</label>
<label class="radio-inline">
  <input type="radio" name="inlineRadioOptions" id="inlineRadio3" ng-model="case.diagnoses[$index].location" value="OU">OU 
</label>
<label class="radio-inline">
  <input type="radio" name="inlineRadioOptions" id="inlineRadio3" ng-model="case.diagnoses[$index].location" value="NA">N/A 
</label>
            </div>
          
          </form>
        </div>
        <button ng-disabled="!user" ng-click="addDiagnosis()" type="button" class="btn btn-default" aria-label="Left Align">
        <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>  Add diagnosis </button>
      </div>

      <h5>Case Summary</h5>
      <textarea class="form-control" placeholder="" ng-model="case.summary" rows="7" ng-disabled="!user"></textarea>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <h4 class="h4-no-bottom-padding">Clinician</h4>
        <div class="col-lg-5">
          <div class="radio">
            <label>
              <input type="radio" name="clinician" ng-model="case.clinician" value="Ward" ng-disabled="!user">Dr. Ward
            </label>
          </div>
          <div class="radio">
            <label>
              <input type="radio" name="clinician" ng-model="case.clinician" value="Hendrix" ng-disabled="!user">Dr. Hendrix
            </label>
          </div>
          <div class="radio">
            <label>
              <input type="radio" name="clinician" ng-model="case.clinician" value="Chen" ng-disabled="!user">Dr. Chen
            </label>
          </div>          
        </div>
        <div class="col-lg-5">
          <div class="radio">
            <label>
              <input type="radio" name="clinician" ng-model="case.clinician" value="Best" ng-disabled="!user">Dr. Best
            </label>
          </div>
          <div class="radio">
            <label>
              <input type="radio" name="clinician" ng-model="case.clinician" value="Newbold" ng-disabled="!user">Dr. Newbold
            </label>
          </div>
          <div class="radio">
            <label>
              <input type="radio" name="clinician" ng-model="case.clinician" value="Other" ng-disabled="!user">Other
            </label>
          </div>          
        </div>
    </div>
  </div>

    <br>
    <button class="btn btn-success" ng-click="submitCase()" ng-disabled="!user">Add case</button> 
  </div> 


  <div class="col-lg-8">
    <br class="visble-xs visble-sm visble-md hidden-lg">
     <div class="row animate-show" ng-show="user">
      <div class="panel panel-default">
        <div class="panel-body">
          <div class="col-lg-12">
            <h1>{{user.name}}</h1>
          </div>
          <div class="col-lg-3">
            <ul class="list-group">
              <li class="list-group-item">
                <span class="badge">{{user.numNewCases}}</span>
                <i class="flaticon-badges1"></i> New cases:
              </li>
              <li class="list-group-item">
                <span class="badge">{{user.numRechecks}}</span>
                <i class="flaticon-checked21"></i> Rechecks:
              </li>
              <li class="list-group-item">
                <span class="badge">{{user.numProcedures}}</span>
                <span class="flaticon-scalpel1"></span> Surgeries: 
              </li>
            </ul>

            <ul class="list-group">
              <li class="list-group-item">
                <span class="badge">{{user.numDogs}}</span>
                <i class="flaticon-dog77"></i> Dogs:
              </li>
              <li class="list-group-item">
                <span class="badge">{{user.numCats}}</span>
                <i class="flaticon-cat19"></i> Cats:
              </li>
              <li class="list-group-item">
                <span class="badge">{{user.numHorses}}</span>
                <i class="flaticon-black200"></i> Horses:
              </li>
              <li class="list-group-item">
                <span class="badge">{{user.numOther}}</span>
                <i class="flaticon-hare"></i> Other:
              </li>
            </ul>
          </div>

          <div class="col-lg-5">
            <div class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title">Cases seen:</h3>
              </div>
              <div class="panel-body">
                <highchart id="chart1" config="chartConfig"></highchart>
              </div>
            </div>
          </div>

          <div class="col-lg-4">
            <div class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title">Ophtho wisdom</h3>
              </div>
              <div class="panel-body">
                Blah blah blah eye stuff.
              </div>
            </div>
            <div class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title">Poll</h3>
              </div>
              <div class="panel-body">
                How much do you love ophthalmology?
                <div class="radio">
                  <label>
                    <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>
                    More than life itself.
                  </label>
                </div>
                <div class="radio">
                  <label>
                    <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
                    I would die for ophthalmology.
                  </label>
                </div>
                <div class="radio">
                  <label>
                    <input type="radio" name="optionsRadios" id="optionsRadios3" value="option3">
                    It's cool I guess.
                  </label>
                </div>
                <div class="radio">
                  <label>
                    <input type="radio" name="optionsRadios" id="optionsRadios3" value="option3">
                    I would marry it if it were legal.
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div> 
    <div class="row">
      <div class="col-lg-12">
        <h3 ng-hide="user" class="hidden-xs hidden-sm hidden-md"><span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span> Please enter your NetId (e.g. jsmith3) to the left to add cases to your caselog!</h3> 
        <h5 ng-hide="user" class="visble-xs visble-sm visble-md hidden-lg"><span class="glyphicon glyphicon-arrow-up" aria-hidden="true" style="padding:10px"></span> Please enter your NetId (e.g. jsmith3) above to add cases to your caselog!</h5> 
      </div>
    </div>
 
   <div class="row">
      <div class="col-lg-12">
         <table class="table table-condensed table-hover">
            <tr>
              <th ng-hide="user">Student</th>
              <th>Date</th>
              <th>PatientID</th>
              <th>Name</th>
              <th>Species</th>
              <th>Diagnoses</th>
              <th>Clinician</th>
              <th>Case Type</th>
              <th ng-show="user"></th>
            </tr> 
            <tr class="animate-show" tooltip-popup-delay='500' tooltip-trigger="mouseenter" tooltip="{{studentcase.summary}}" tooltip-append-to-body="true" ng-repeat="studentcase in cases | orderBy:'date' |limitTo:25">
              <td ng-hide="user">{{studentcase.studentName}}</td>
              <td>{{studentcase.date | date:'MMM dd, yyyy'}}</td>
              <td>{{studentcase.patientId}}</td>
              <td>{{studentcase.patientName}} {{studentcase.patientSurname}}</td>
              <td>{{studentcase.patientSpecies}}</td> 
              <td>{{studentcase.diagnoses | prettyArrayOutput}}</td> 
              <td>{{studentcase.clinician }}</td> 
              <td>{{studentcase.caseType | capitalize}}</td>
              <td ng-show="user"><button type="button" class="btn btn-default btn-xs" ng-click="deleteCase(studentcase)">
              <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Delete </button></td>
            </tr>
        </table> 
      </div>
    </div> 
  </div> <!-- End second column -->
</div> <!-- end row -->
</div>