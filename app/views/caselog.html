<script type="text/ng-template" id="newUser.html">
  <div class="modal-header">
    <h3 class="modal-title">Create a new user!</h3>
  </div> 
  <div class="modal-body">
  NetID: {{netId}}
  <input type="text" class="form-control form-inline" placeholder="What's your name?" ng-model="newStudentName">
  </div>
  <div class="modal-footer">
    <button class="btn btn-primary" ng-click="ok()">OK</button>
    <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
  </div>
</script>
<div class="row">
  <div class="col-md-4">
    <div class="row">
      <div class="col-sm-8 form-group form-inline">
        <!-- <input type="text" class="form-control form-inline" placeholder="Enter your NetId" ng-model="netId" style="width:200px" typeahead="student.studentName for student in snames | filter:$viewValue" typeahead-on-select="existingStudentSelected()"> -->
        <input type="text" class="form-control form-inline" placeholder="Enter your NetId" ng-model="netId" style="width:200px">
        <input type="submit" class="form-control" ng-hide="newUser" value="Login" ng-click="login()">
      </div>
    </div>
    <div class="row" ng-show="newUser">
      <div class="col-md-4">
        <input type="text" class="form-control" placeholder="What's your name?" ng-model="newStudentName" style="width:200px">
        <input type="submit" class="form-control" value="Create new user" ng-click="createUser()">
      </div>
    </div>
      <h4>Date case was seen</h4>
    <div class="row">
        <div class="col-md-7">
            <p class="input-group">
              <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="dt" is-open="opened" min-date="minDate" max-date="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" />
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
              </span>
            </p>
        </div>
    </div>
  <h4>Patient Info</h4>
  <form class="form-group form-inline">
    <div class="form-group">
        <label for="patientID" class="sr-only">Patient ID</label>
        <input type="text" class="form-control" placeholder="Patient ID" ng-model="case.patientId">
      </div>
    <select class="form-control" ng-model="patientSpecies"> 
      <option value="" selected>Pick a species</option>
      <option value="Canine">Canine</option>
      <option value="Feline">Feline</option>
      <option value="Equine">Equine </option>
      <option value="Other">Other</option>
    </select>
    <br>
      <div class="form-group">
        <label for="Patient Name" class="sr-only">Patient name</label>
        <input type="text" class="form-control" placeholder="Patient name" ng-model="case.patientName">
      </div>
      <div class="form-group">
        <label for="Patient Surname" class="sr-only">Patient last name</label>
        <input type="text" class="form-control" placeholder="Patient last name" ng-model="case.patientSurname">
      </div>
    </form>

    <h4>Case info</h4>
    <form class="form-group">
      <label class="radio-inline">
        <input type="radio" name="case-type" ng-model="case.caseType" value="new">New case
      </label>
      <label class="radio-inline">
        <input type="radio" name="case-type" ng-model="case.caseType" value="recheck">Recheck
      </label>
      <label class="radio-inline">
        <input type="radio" name="case-type" ng-model="case.caseType" value="emergency">Emergency
      </label>
      <label class="checkbox-inline">
        <input type="checkbox" name="case-type" ng-model="case.surgeryProcedure">Surgery/Procedure
      </label>
    </form>
    <div class="form-group">
      <div ng-repeat="diagnosis in case.diagnoses track by $index">
        <input type="text" class="form-control" ng-model="case.diagnoses[$index]" placeholder="Diagnosis">
      </div>
    </div>
    <textarea class="form-control" placeholder="Treatment" ng-model="case.treatment" rows="3"></textarea>
    <textarea class="form-control" placeholder="Outcome" rows="2" ng-model="case.outcome"></textarea>
    <textarea class="form-control" placeholder="Followup" rows="2" ng-model="case.followup"></textarea>
    <h4>Clinician (hold Ctrl to select more than 1)</h4>
    <select multiple class="form-control" ng-model="case.clinicians" ng-change="changedClinicians()"> 
      <option value="ward">Dr. Ward</option>
      <option value="hendrix">Dr. Hendrix</option>
      <option value="chen">Dr. Chen</option>
      <option value="best">Dr. Best</option>
      <option value="other">Other</option>
    </select>
    <br>
    <input type="submit" value="Add case" ng-click="submitCase()">
  </div> <!-- End first column --> 
  <h2></h2>
  <div class="col-md-8">
    <div class="form-group form-inline">
      <input type="text" class="form-control" placeholder="Filter by clinician" style="width:200px" ng-model="search.clinicians">
      <input type="text" class="form-control" placeholder="Filter by diagnosis" style="width:200px" ng-model="search.diagnoses">
    </div>
      <table class="table table-condensed table-hover">
        <tr>
          <th>PatientID</th>
          <th>Name</th>
          <th>Last Name</th>
          <th>Diagnoses</th>
          <th>Student</th>
          <th>Clinicians</th>
          <th></th>
        </tr> 
        <tr ng-repeat="studentcase in cases | filter:search">
          <td>{{studentcase.patientId}}</td>
          <td>{{studentcase.patientName}}</td>
          <td>{{studentcase.patientSurname}}</td>
          <td>{{studentcase.diagnoses}}</td> 
          <td>{{studentcase.studentName}}</td> 
          <td>{{studentcase.clinicians }}</td> 
          <td><button type="button" class="btn btn-default btn-xs" ng-click="deleteCase(studentcase)">
          <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Delete </button></td>
        </tr>
    </table> 
    <button ng-click="debug()"></button>
  </div> <!-- End second column -->
  {{netId}}
</div> <!-- end row -->
